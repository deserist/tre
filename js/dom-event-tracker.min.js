!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){var n=Object.freeze({SEEN:"seen",CLICK:"click",CLICK_CAPTURE:"click-capture"});e.exports={TRACKING_TYPE:n,ROOT_TRACKER_ATTRIBUTE:"data-tracker-root",TRACKING_ATTRIBUTE:"data-tracker"}},function(e,t,n){var r=n(2),i=n(4),o=n(5),a=new(n(6)),c=new o(a),u=new i;Object.defineProperty(window,"Tracker",{writable:!1,enumerable:!1,configurable:!1,value:new r(u,c,a)})},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0),o=n(3),a=o.ERRORS,c=o.WARNINGS,u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.featureDetector=t,this.observer=n,this.listener=r,this.checkStartCallback()}var t,n,o;return t=e,(n=[{key:"init",value:function(e){if(!this.featureDetector.supported)return console.warn(c.DATA_TRACKER_NOT_SUPPORTED);var t=e||this.logEvent;return this.registerInitialListeners(t),this.registerMutationObserver(t),!0}},{key:"checkStartCallback",value:function(){var e=this.getRootElement().attributes[i.ROOT_TRACKER_ATTRIBUTE].value;window[e]&&window[e]instanceof Function&&this.init(window[e])}},{key:"getRootElement",value:function(){var e=document.querySelector("[".concat(i.ROOT_TRACKER_ATTRIBUTE,"]"));if(!e)throw a.ROOT_ELEMENT_NOT_REGISTERED;return e}},{key:"registerMutationObserver",value:function(e){var t=this.getRootElement();this.observer.init(t,e)}},{key:"registerInitialListeners",value:function(e){var t=this;document.querySelectorAll("[".concat(i.TRACKING_ATTRIBUTE,"]")).forEach((function(n){t.listener.track(n,e)}))}},{key:"logEvent",value:function(e,t,n){console.log({eventName:e,type:t,element:n})}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=u},function(e,t,n){var r=n(0),i={ROOT_ELEMENT_NOT_REGISTERED:"[CODE: E1] Root element not registered, use attribute ".concat(r.ROOT_TRACKER_ATTRIBUTE,".")};e.exports={ERRORS:i,WARNINGS:{DATA_TRACKER_NOT_SUPPORTED:"[CODE: W1] Data tracker is not supported on your browser"}}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intersectionObserverSupported=this.detectIntersectionObserverSupport(),this.mutationObserverSupported=this.detectMutationObserverSupport()}var t,r,i;return t=e,(r=[{key:"detectIntersectionObserverSupport",value:function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}},{key:"detectMutationObserverSupport",value:function(){return"MutationObserver"in window}},{key:"supported",get:function(){return this.intersectionObserverSupported&&this.mutationObserverSupported}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=r},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listener=t,this.onMutation=this.onMutation.bind(this),this.detectTrackerOnElement=this.detectTrackerOnElement.bind(this)}var t,n,o;return t=e,(n=[{key:"init",value:function(t,n){this.handlerCallback=n,this.rootElement=t,this.observer=new MutationObserver(this.onMutation),this.observer.observe(this.rootElement,e.OBSERVER_CONFIGURATION)}},{key:"onMutation",value:function(e){var t=this;e.forEach((function(e){"childList"===e.type?(t.detectTrackerOnElement(e.target),t.traverseNodes(e.addedNodes)):"attributes"===e.type&&t.detectTrackerOnElement(e.target)}))}},{key:"detectTrackerOnElement",value:function(e){e&&e.attributes&&e.attributes[i.TRACKING_ATTRIBUTE]&&this.listener.track(e,this.handlerCallback)}},{key:"traverseNodes",value:function(e){var t=this;e&&(e instanceof NodeList||e instanceof Array)&&e.forEach((function(e){t.detectTrackerOnElement(e),t.traverseNodes(e.childNodes)}))}}])&&r(t.prototype,n),o&&r(t,o),e}();o.OBSERVER_CONFIGURATION={attributes:!0,childList:!0,subtree:!0},e.exports=o},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(0).TRACKING_TYPE,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"track",value:function(e,t){var n={element:e,trackers:this.parseTrackerOptions(e.getAttribute("data-tracker"))};e.__tracker_registered||(e.__tracker_registered=!0,this.hookListeners(n,t))}},{key:"parseTrackerOptions",value:function(e){return e.split(" ").map((function(e){var t=r(e.split(":"),2);return{type:t[0],event:t[1]}}))}},{key:"hookListeners",value:function(e,t){var n=this;e.trackers.forEach((function(r){r.type===o.CLICK?e.element.addEventListener("click",t.bind(null,r.event,r.type,e.element)):r.type===o.CLICK_CAPTURE?e.element.addEventListener("click",t.bind(null,r.event,r.type,e.element),{capture:!0}):r.type===o.SEEN&&n.registerIntersectionObserver(r,e.element,t)}))}},{key:"registerIntersectionObserver",value:function(e,t,n){new IntersectionObserver(this.onIntersection.bind(null,e,t,n)).observe(t)}},{key:"onIntersection",value:function(e,t,n,r,i){r.forEach((function(r){r.isIntersecting&&n(e.event,e.type,t)&&i.disconnect()}))}}])&&i(t.prototype,n),a&&i(t,a),e}();e.exports=a}]);
//# sourceMappingURL=dom-event-tracker.min.js.map